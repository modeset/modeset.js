%div.demo_info
  %h1 TouchScrollerFormFocus demo
  %div Animates form fields into view on focus() within a TouchScroller. Specifically for use on mobile/phonegap projects when you need more native-like behavior with forms. Also holds the window in place to prevent the default behavior of iOS HTML forms of zooming/panning between fields. This demo doesnt give the full picture, but it does show the code setup.
%div.demo_holder
  %div.controls_ui.right_side
  %div.scroll_outer
    %div.scroll_inner
      %input.form_focus
      %input.form_focus
      %input.form_focus
      %input.form_focus
      
%div.demo_controls
  %h2 Controls
  %div.controls_ui.status


:javascript
  var Demo = function(){

    var _scroller = null,
        _scrollerFormFocus = null,
        _gui = null;

    // set styles on containers to run the demo
    var prepContainers = function() {
      $('div.scroll_outer').css({
        position:'relative',
        height:'400px',
        width:'400px',
        backgroundColor:'#ccc'
      });
      $('div.scroll_inner').css({
        position:'absolute',
        height:'800px',
        width:'400px',
        background:'#666 url(/images/mode-set-logo.png) repeat'
      });
      $('input.form_focus').css({
        margin:'100px auto',
        width:'200px',
        background:'#ddd'
      });
    };

    // init the demo
    var initDemo = function() {
      _scroller = new TouchScroller( $('.scroll_outer')[0], $('.scroll_inner')[0], true, new Cursor(), false, TouchScroller.VERTICAL, {}, '' );
      // add form scroll object and set the delegate
      _scrollerFormFocus = new TouchScrollerFormFocus( _scroller, $('.scroll_outer')[0] );
      _scrollerFormFocus.init();
      _scroller.setScrollerDelegate( _scrollerFormFocus );

      runTimer();
    };

    var dispose = function(){
      _scroller.dispose();
      _scrollerFormFocus.dispose();
    };

    var _config = {
      dispose: dispose
   };

    // tweak demo vars
    var setUpControls = function(){
      // init DAT_GUI
      _gui = new dat.GUI({ autoPlace: false });
      document.getElementsByClassName('controls_ui')[0].appendChild(_gui.domElement);
      $('.controls_ui .close-button').remove();

      // add global scroll properties
     _gui.add(_config, 'dispose');

    };

    // frame loop
    var runTimer = function(){
      setTimeout(function(){ runTimer(); },30);
    };
    
    // fire up demo
    $(document).ready(function() {
      prepContainers();
      initDemo();
      setUpControls();
    });
  }();
